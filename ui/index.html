<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spellbook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <main class="page">
      <nav class="top-nav" aria-label="Primary">
        <a class="nav-link active" href="/">Catalog</a>
        <a class="nav-link" href="/prepare">Prepare</a>
      </nav>

      <header class="hero">
        <p class="eyebrow">Spell Planner</p>
        <h1>Spellbook</h1>
        <p class="subtitle">Filter and browse your available spells before planning long-rest changes.</p>
      </header>

      <section class="panel account-panel" aria-label="Authentication">
        <div class="account-grid auth-grid">
          <label>
            Sign up User ID
            <input id="signupUserIdInput" type="text" minlength="2" maxlength="64" pattern="[A-Za-z0-9_.-]{2,64}" placeholder="new-user" />
          </label>
          <label>
            Display Name
            <input id="signupDisplayNameInput" type="text" maxlength="80" placeholder="Optional display name" />
          </label>
          <button id="signupButton" type="button">Sign Up</button>
        </div>
        <div class="account-grid auth-grid">
          <label>
            Sign in User ID
            <input id="signinUserIdInput" type="text" minlength="2" maxlength="64" pattern="[A-Za-z0-9_.-]{2,64}" placeholder="existing-user" />
          </label>
          <label>
            Character ID
            <input id="characterIdInput" type="text" minlength="2" maxlength="64" pattern="[A-Za-z0-9_.-]{2,64}" placeholder="default-character" />
          </label>
          <div class="account-actions">
            <button id="signinButton" type="button">Sign In</button>
            <button id="logoutButton" type="button" class="secondary-button">Log Out</button>
          </div>
        </div>
        <div class="account-grid account-switch-grid">
          <div class="muted account-inline-note">Character applies to current signed-in user.</div>
          <div></div>
          <button id="switchCharacterButton" type="button" class="secondary-button">Switch Character</button>
        </div>
        <p id="accountSessionSummary" class="muted account-summary">Not signed in.</p>
      </section>

      <section class="panel controls" aria-label="Spell filters">
        <label>
          Search
          <input id="nameFilter" type="search" placeholder="Spell name..." list="nameSuggestions" />
        </label>
        <label>
          Level
          <select id="levelFilter">
            <option value="">All levels</option>
          </select>
        </label>
        <label>
          Source
          <input id="sourceFilter" type="text" placeholder="e.g. Druid" list="sourceSuggestions" />
        </label>
        <label>
          Tags
          <input id="tagsFilter" type="text" placeholder="comma, separated" list="tagSuggestions" />
        </label>
        <button id="clearFilters" type="button">Clear filters</button>
      </section>

      <datalist id="nameSuggestions"></datalist>
      <datalist id="sourceSuggestions"></datalist>
      <datalist id="tagSuggestions"></datalist>

      <section class="stats" aria-live="polite">
        <article class="panel stat">
          <h2>Total shown</h2>
          <p id="countValue">0</p>
        </article>
        <article class="panel stat">
          <h2>Prepared shown</h2>
          <p id="preparedValue">0</p>
        </article>
      </section>

      <section class="panel table-panel" aria-label="Spell list">
        <div class="table-tools">
          <span id="saveModeBadge" class="mode-badge remote">Remote</span>
          <button id="resetLocalEdits" type="button" class="secondary-button" hidden>Reset local edits</button>
        </div>
        <div id="statusMessage" class="status">Loading spells...</div>
        <div class="table-wrap">
          <table>
            <thead>
              <tr>
                <th><button type="button" class="sort-button" data-sort="source">Source</button></th>
                <th><button type="button" class="sort-button" data-sort="level">Level</button></th>
                <th><button type="button" class="sort-button" data-sort="name">Name</button></th>
                <th><button type="button" class="sort-button" data-sort="tags">Tags</button></th>
                <th><button type="button" class="sort-button" data-sort="prepared">Prepared</button></th>
              </tr>
            </thead>
            <tbody id="spellTableBody"></tbody>
          </table>
        </div>
      </section>
    </main>

    <script type="module" src="/app.js"></script>
  </body>
</html>
